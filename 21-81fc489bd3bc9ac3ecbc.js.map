{"version":3,"sources":["webpack:///./node_modules/gatsby/node_modules/core-js/internals/promise-resolve.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/species-constructor.js","webpack:///./src/components/team/teamCanvas.ts","webpack:///./src/components/team/memberCanvas.ts","webpack:///./src/components/team/teamRelations.tsx","webpack:///./node_modules/gatsby/node_modules/core-js/internals/new-promise-capability.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/native-symbol.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/well-known-symbol.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/use-symbol-as-uid.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/native-promise-constructor.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es.promise.finally.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es.math.hypot.js"],"names":["anObject","isObject","newPromiseCapability","module","exports","C","x","constructor","promiseCapability","f","resolve","promise","aFunction","SPECIES","wellKnownSymbol","O","defaultConstructor","S","undefined","TeamCanvas","width","height","this","isHorizontalOutside","size","isVerticalOutside","y","leftSide","planet","getCenter","MemberCanvas","memberId","memberName","img","tags","nick","description","role","social","id","name","coordinates","halfSize","Math","floor","setNewCenter","mouseX","mouseY","TeamRelations","props","useState","members","setMembers","canvas","setCanvas","canvasEl","setCanvasEl","setSize","drag","setDrag","activeMember","setActiveMember","draggedMember","setDraggedMember","team","categories","getMainSize","ratio","mainSize","lowSize","drawCategoryRelation","category","p5","drawInfo","getLine","strokeWeight","color","r","g","b","stroke","centers","filter","m","includes","map","mb","forEach","c","i","next","drawingContext","style","setLineDash","line","toLowerCase","getActiveElement","minDist","max","member","center","dist","rightActiveMember","memberStyle","right","top","left","getMemberStyle","className","preload","min","window","innerWidth","innerHeight","columns","rows","sizes","columnSize","rowSize","squareSize","xCoord","random","yCoord","push","retrieveCenters","length","memberSize","sortableArray","array","slice","j","shuffleArray","p5Img","loadImage","draw","currentCategory","background","noFill","drawRelations","t","find","ellipse","image","drawTeam","setup","canvasParentRef","createCanvas","parent","frameRate","mouseDragged","mouseReleased","setTimeout","mouseClicked","visible","handleClick","event","stopPropagation","toggleDescription","PromiseCapability","reject","$$resolve","$$reject","TypeError","fails","Object","getOwnPropertySymbols","String","Symbol","global","shared","has","uid","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","sham","iterator","Promise","$","IS_PURE","NativePromise","getBuiltIn","speciesConstructor","promiseResolve","redefine","target","proto","real","forced","prototype","call","then","onFinally","isFunction","e","$hypot","hypot","abs","sqrt","stat","Infinity","NaN","value1","value2","arg","div","sum","aLen","arguments","larg"],"mappings":"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","file":"21-81fc489bd3bc9ac3ecbc.js","sourcesContent":["var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","class TeamCanvas {\n  width: number\n  height: number\n\n  constructor(width: number, height: number) {\n    this.width = width\n    this.height = height\n  }\n\n  isHorizontalOutside(x: number, size: number): boolean {\n    return x > this.width - size || x < 0\n  }\n\n  isVerticalOutside(y: number, size: number): boolean {\n    return y > this.height - size || y < 0\n  }\n\n  leftSide(planet) {\n    const center = planet.getCenter()\n    return (center.x < (this.width / 2))\n  }\n}\n\nexport default TeamCanvas","import p5Types from 'p5'\nimport { Coordinates, Channel } from './model'\n\nclass MemberCanvas {\n  id: string\n  name: string\n  coordinates: Coordinates\n  size: number\n  img: p5Types.Image\n  tags: string[]\n  nick: string\n  description: string\n  role: string\n  social: Channel[]\n\n  constructor(\n    memberId: string, \n    memberName: string, \n    x: number, \n    y: number, \n    size: number, \n    img: p5Types.Image, \n    tags: string[],\n    nick: string,\n    description: string,\n    role: string,\n    social: Channel[]\n  ) {\n    this.id = memberId\n    this.name = memberName\n    this.coordinates = { x, y}\n    this.size = size\n    this.img = img\n    this.tags = tags\n    this.nick = nick\n    this.description = description\n    this.role = role \n    this.social = social\n  }\n\n  getCenter(): Coordinates {\n    const halfSize = Math.floor(this.size / 2)\n    return {\n      x: this.coordinates.x + halfSize,\n      y: this.coordinates.y + halfSize,\n    }\n  }\n\n  setNewCenter(mouseX, mouseY) {\n    const halfSize = Math.floor(this.size / 2)\n    const x = mouseX - halfSize \n    const y = mouseY - halfSize \n    this.coordinates = { x, y }\n  }\n}\n\nexport default MemberCanvas","import React, { useState } from 'react'\nimport Sketch from 'react-p5'\nimport p5Types from 'p5'\n\nimport { FullMember } from './model'\nimport TeamCanvas from './teamCanvas'\nimport MemberCanvas from './memberCanvas'\nimport MemberDescription from './memberDescription'\n\nexport interface TeamMembers {\n  team: FullMember[],\n  categories: string[]\n  currentCategory: string | null\n}\n\nconst TeamRelations = (props: TeamMembers) => {\n  const [members, setMembers] = useState([])\n  const [canvas, setCanvas] = useState<TeamCanvas>()\n  const [canvasEl, setCanvasEl] = useState()\n  const [size, setSize] = useState<number>(100)\n  const [drag, setDrag] = useState<boolean>(false) \n  const [activeMember, setActiveMember] = useState<MemberCanvas>()\n  const [draggedMember, setDraggedMember] = useState<MemberCanvas>()\n  const { team, categories } = props\n\n  const frameRate = 30\n\n  const getMainSize = (members: number, ratio: number): {mainSize: number, lowSize: number} => {\n    let mainSize = ratio;\n    let lowSize = 1;\n    while(mainSize * lowSize < members) {\n      lowSize++;\n      mainSize = ratio * lowSize;\n    }\n    return {\n      mainSize,\n      lowSize\n    }\n  }\n\n  const retrieveCenters = (width: number, height: number, members: number, p5: p5Types): {squareSize: number, centers: Coordinates[]} => {\n    let columns = 0\n    let rows = 0\n    let ratio = 0\n    if (width > height) {\n      ratio = Math.floor(width / height)\n      const sizes = getMainSize(members, ratio)\n      rows = sizes.mainSize\n      columns = sizes.lowSize\n    } else {\n      ratio = Math.floor(height / width)\n      const sizes = getMainSize(members, ratio)\n      rows = sizes.lowSize\n      columns = sizes.mainSize\n    }\n    const columnSize = Math.floor(width / columns)\n    const rowSize = Math.floor(height / rows)\n    const squareSize = p5.min(columnSize, rowSize)\n    const centers = []\n    for (let x = 0; x < columns; x++) {\n      for (let y = 0; y < rows; y++) {\n        const xCoord = x * columnSize + Math.floor(columnSize / 2) + Math.floor(p5.random(-20, 21))\n        const yCoord = y * rowSize + Math.floor(rowSize / 2) + Math.floor(p5.random(-20, 21))\n        centers.push({ x: xCoord, y: yCoord })\n      }\n    }\n    return {squareSize, centers}\n  } \n\n  const shuffleArray = (sortableArray) => {\n    const array = sortableArray.slice();\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array\n}\n  \n  const preload = (p5: p5Types) => {\n    const width = p5.min(1200, window.innerWidth - 40)\n    const height = p5.min(1000, window.innerHeight - 200)\n    const centers = retrieveCenters(width, height, team.length, p5)\n    const memberSize = Math.floor(centers.squareSize / 1.5)\n    const halfSize = Math.floor(memberSize / 2)\n    setSize(memberSize)\n    setCanvas(new TeamCanvas(width, height))\n    const coordinates = shuffleArray(centers.centers).slice(0, team.length)\n    const members = coordinates.map((c, i) => {\n      const m = team[i]\n      const p5Img = p5.loadImage(m.img)\n      const { x, y } = c\n      return new MemberCanvas(\n        m.id, \n        m.name, \n        x - halfSize, \n        y - halfSize, \n        memberSize, \n        p5Img, \n        m.tags,\n        m.nick, \n        m.description,\n        m.role,\n        m.social)\n    })\n    setMembers(members)\n  }\n\n  const setup = (p5: p5Types, canvasParentRef: Element) => {\n    const canvasEl = p5.createCanvas(canvas.width, canvas.height).parent(canvasParentRef) as unknown as any\n    setCanvasEl(canvasEl)\n    p5.frameRate(frameRate)\n  }\n\n  const drawRelations = (p5, canvasEl) => {\n    const { currentCategory } = props\n    p5.background(217, 50, 50)\n    p5.noFill()\n    if (currentCategory != 'Tutti') {\n      drawCategoryRelation(currentCategory, p5, canvasEl)\n    } else {\n      categories.forEach(c => {\n        drawCategoryRelation(c, p5, canvasEl)\n      })\n    }\n  }\n \n  const drawCategoryRelation = (category, p5, canvasEl) => {\n    const drawInfo = getLine(category)\n      p5.strokeWeight(drawInfo.strokeWeight)\n      const {r,g, b} = drawInfo.color\n      p5.stroke(r, g, b)\n      const centers = members.filter(m => {\n        return m.tags && m.tags.includes(category)\n      }).map(mb => mb.getCenter())\n      centers.forEach((c, i) => {\n        const next = centers[i + 1]\n        if (next && canvasEl.drawingContext) {\n          if (drawInfo.style === 'dash'){\n            canvasEl.drawingContext.setLineDash([5, 10]);\n          } else {\n            canvasEl.drawingContext.setLineDash([]);\n          }\n          p5.line(c.x, c.y, next.x, next.y)\n        }\n      })\n  }\n\n  const drawTeam = (p5, canvasEl) => {\n    canvasEl.drawingContext.setLineDash([]);\n    p5.stroke(0, 0, 0)\n    team.forEach(t => {\n      const m = members.find(m => m.id === t.id)\n      if(m){\n        const center = m.getCenter()\n        p5.ellipse(center.x, center.y, m.size + 2)\n        p5.image(m.img, m.coordinates.x, m.coordinates.y, m.size, m.size)\n      }\n    })\n  } \n\n  const getLine = (category: string) => {\n    switch (category.toLowerCase()){\n      case 'frontend':\n        return {\n          color: {\n            r: 255, \n            g: 255, \n            b: 255\n          },\n          strokeWeight: 2,\n          style: 'line'\n        }\n      case 'design':\n        return {\n          color: {\n            r: 0, \n            g: 0, \n            b: 0\n          },\n          strokeWeight: 2,\n          style: 'dash'\n        }\n      case 'management':\n        return {\n          color: {\n            r: 255, \n            g: 255, \n            b: 255\n          },\n          strokeWeight: 2,\n          style: 'dash'\n        }\n      default:\n        return {\n          color: {\n            r: 0, \n            g: 0, \n            b: 0\n          },\n          strokeWeight: 2,\n          style: 'line'\n        }\n    }\n  }\n\n  const draw = (p5: p5Types) => {\n    drawRelations(p5, canvasEl)\n    drawTeam(p5, canvasEl)\n  }\n\n\n  const mouseDragged = (p5: p5Types) => {\n    setDrag(true)\n    const { mouseX, mouseY } = p5\n    const halfSize = Math.floor(size)\n    const x = mouseX > halfSize ? (mouseX < (canvas.width - halfSize) ? mouseX : canvas.width - halfSize) : halfSize\n    const y = mouseY > halfSize ? (mouseY < (canvas.height - halfSize) ? mouseY : canvas.height - halfSize) : halfSize\n    if (mouseX === x || mouseY === y) {\n      if (drag) {\n        if (draggedMember) {\n          draggedMember.setNewCenter(x, y)\n        }\n      } else {  \n        const member = getActiveElement(p5, x, y)\n        if (member) {\n          member.setNewCenter(x, y)\n          setDraggedMember(member)\n        }\n      }\n    return false\n    } \n  }\n\n  const mouseReleased = () => {\n    setTimeout(() => {\n      setDraggedMember(null)\n      setDrag(false)\n    })\n  }\n\n  const mouseClicked = (p5: p5Types) => {\n    const { mouseX, mouseY } = p5\n    const member = getActiveElement(p5, mouseX, mouseY)\n    if (member && !drag) {\n      if (!activeMember || activeMember.id !== member.id) {\n        setActiveMember(member)\n      } else {\n        setActiveMember(null)\n      }\n    }\n  }\n\n  const getActiveElement = (p5: p5Types, x, y) => {\n    let minDist = p5.max(canvas.width, canvas.height) \n    let member = null\n    members.forEach(m => {\n      const center = m.getCenter()\n      const dist = p5.dist(center.x, center.y, x, y)\n      const halfSize = Math.floor(m.size / 2)\n      if (dist < halfSize && dist < minDist) {\n        minDist = dist\n        member = m\n      }\n    })\n    return member\n  }\n\n  const rightActiveMember = activeMember && (activeMember.coordinates.x > (Math.floor(canvas.width / 2)))\n\n  const getMemberStyle = (right: boolean) => {\n    if (activeMember) {\n      const top = activeMember.coordinates.y\n      if (right) {\n        return {\n          top,\n          right: canvas.width - activeMember.coordinates.x\n        }\n      } else {\n        return {\n          top,\n          left: activeMember.coordinates.x + activeMember.size\n        }\n      }\n    } else {\n      return {}\n    }\n  }\n\n  const memberStyle = getMemberStyle(rightActiveMember)\n\n  const toggleDescription = () => {\n    setActiveMember(null)\n  } \n\n  const handleClick = (event) => {\n    event.stopPropagation();\n  }\n\n  return (\n    <div className=\"cp-team__list\">\n      <Sketch \n        preload={preload} \n        draw={draw} \n        setup={setup} \n        mouseDragged={mouseDragged} \n        mouseReleased={mouseReleased} \n        mouseClicked={mouseClicked} />\n      {activeMember && <MemberDescription visible={!!activeMember} right={rightActiveMember} memberStyle={memberStyle}\n          member={activeMember} handleClick={handleClick} toggleDescription={toggleDescription} />}\n    </div>\n  )\n}\n\nexport default TeamRelations","'use strict';\nvar aFunction = require('../internals/a-function');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\n\n// 25.4.1.5 NewPromiseCapability(C)\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = typeof onFinally == 'function';\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// patch native Promise.prototype for native async functions\nif (!IS_PURE && typeof NativePromise == 'function' && !NativePromise.prototype['finally']) {\n  redefine(NativePromise.prototype, 'finally', getBuiltIn('Promise').prototype['finally']);\n}\n","var $ = require('../internals/export');\n\nvar $hypot = Math.hypot;\nvar abs = Math.abs;\nvar sqrt = Math.sqrt;\n\n// Chrome 77 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=9546\nvar BUGGY = !!$hypot && $hypot(Infinity, NaN) !== Infinity;\n\n// `Math.hypot` method\n// https://tc39.es/ecma262/#sec-math.hypot\n$({ target: 'Math', stat: true, forced: BUGGY }, {\n  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * sqrt(sum);\n  }\n});\n"],"sourceRoot":""}